<!DOCTYPE html>
<!-- An improvement of http://plnkr.co/edit/fETiSYVW7Y5C1yTCwizd?p=preview -->
<html ng-app="plunker">
<head>
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.19/angular.min.js"></script>
	
	<!-- Live update -->
	<script src="../../../../common/live.js"></script>

	<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
</head>
<body ng-controller="MainCtrl">

<div class="container">

	<div class="text-center">
		<h1>Multiple forms with AngularJS</h1>
	</div>

	<form name="{{form.name}}" ng-repeat="form in forms">
	
		<h2>{{form.name}}</h2>

		<div ng-repeat="cont in form.contacts">
			<div class="row" style="padding-bottom: 1%">
				<div class="col-lg-3">
					<input type="text" class="form-control" ng-model="cont.ac" placeholder="ac...">
				</div>
				<div class="col-lg-3">
					<input type="text" class="form-control" ng-model="cont.cat" placeholder="cat...">
				</div>
				<div class="col-lg-3">
					<input type="text" class="form-control" ng-model="cont.loc" placeholder="log...">
				</div>
				<div class="col-lg-3">
					<button type="button" ng-show="form.contacts.length > 1" ng-click="removeRow(form, $index)" class="btn btn-danger">X</button>
				</div>
			</div>
		</div>

		<button class="btn btn-success" ng-click="submit(form)">Submit</button>
		<button class="btn btn-primary" ng-click="addFields(form)">Add</button>
		
		<!-- Debug \ View form values: -->
		<br><br>
		<pre>{{ form | json }}</pre>
		
		<hr>
	</form>

</div>

<script>
var app = angular.module('plunker', []);

app.controller('MainCtrl', function($scope) {
    
	$scope.forms = [{
		name: "Form 1",
		contacts:[{ ac: '', auth: '', autname: ''}]
	},{
		name: "Form2",
		contacts:[{ ac: '', auth: '', autname: ''}]
	},{
		name: "Form 3",
		contacts:[{ ac: '', auth: '', autname: ''}]
	}];

	$scope.addFields = function (form) {        
		form.contacts.push({ ac: '', auth: '', autname: '' });
	}
	
	$scope.removeRow = function(form, currentRowIndex){
		form.contacts.splice(currentRowIndex, 1);
	}
    
	$scope.submit = function(form){
		console.log(form.contacts);
	}

});
</script>
</body>
</html>